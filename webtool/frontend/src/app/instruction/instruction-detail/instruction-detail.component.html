<ng-container *ngIf="instructionGroup$ | async as instructionGroup else loading">

  <h1>Instruction {{instructionGroup.get('reference').value}}</h1>

  <p>InstructionGroup:<br />{{instructionGroup.value | json}}</p>
  <p>TopicGroup:<br />{{(topicGroup$ | async)?.value | json}}</p>
  <p>EventIds: {{instructionGroup.get('instructionId').value}}, {{instructionGroup.get('meetingIds').value.join(', ')}}</p>
  <p>EventArray:<br />{{(eventArray$ | async)?.value | json}}</p>

  <!--GuideComponent // TeamComponent // Abrechnung-->
  <div class="p-grid">
    <div class="p-col-12 p-sm-6 p-md-6 p-lg-6">
      <avk-guide
          formControlName="guideId"
          id="g1"
          label="Trainer"
          [nameIdList]="teamIds.value"
          [readOnly]="!(userValState >= 0)"
          required
      ></avk-guide>
    </div>
    <div class="p-col-12 p-sm-3 p-md-3 p-lg-3">
      <input id="costs" placeholder="Kosten" type="text" style='width:100%'
             pInputText>
    </div>
    <div class="p-col-12 p-sm-3 p-md-3 p-lg-3">
      <input id="revenue" placeholder="Einnahmen" type="text" style='width:100%'
             [readOnly]="!(userValState >= 0)" pInputText>
    </div>
  </div>

  <div class="p-grid">
    <div class="p-sm-6 p-md-6 p-lg-6">
      <avk-team
          formControlName="teamIds"
          id="g2"
          label="Team"
          [nameId]="guideId.value"
          [readOnly]="!(userValState >= 0)"
      ></avk-team>
    </div>
    <div class="p-sm-3 p-md-3 p-lg-3">
      <p-checkbox
          [formControl]="instructionForm.controls['lowEmissionAdventure']"
          label="LEA"
          binary="true"
      ></p-checkbox>
    </div>
    <div class="p-sm-3 p-md-3 p-lg-3">
      <p-checkbox
          [formControl]="instructionForm.controls['ladiesOnly']"
          label="LadiesOnly"
          binary="true"
      ></p-checkbox>
    </div>
  </div>

  <!--Buchungscode, Status, Kurskonzept, InfoBox-->
  <div class="p-grid">
    <div class="p-col-12 p-sm-3 p-md-3 p-lg-3">
      <input formControlName="reference" id="reference" placeholder="Buchungsnummer" type="text" style='width:100%'
             readonly pInputText>
    </div>
    <div class="p-col-12 p-sm-3 p-md-3 p-lg-3">
      <avk-dropdown formControlName="stateId" id="stateId" [readOnly]="!(userValState >= 0)"></avk-dropdown>
    </div>
    <div class="p-col-12 p-sm-3 p-md-3 p-lg-3">
      <avk-categoryselect
          formControlName="topicId"
          id="topicId"
          [readOnly]="!(userValState >= 0)"
          [editAble]="isSpecial.value">
      </avk-categoryselect>
    </div>
    <div class="p-col-12 p-sm-3 p-md-3 p-lg-3">
      <p-checkbox
          [formControl]="instructionForm.controls['isSpecial']"
          label="Spezialkategorie"
          binary="true"
      ></p-checkbox>
    </div>
  </div>

  <!--Beschreibung-->
<!--  <div class="p-grid">-->
<!--    <div class="p-col-12 p-sm-12 p-md-12 p-lg-12">-->
<!--      <textarea-->
<!--          formControlName="description"-->
<!--          [rows]="5"-->
<!--          pInputTextarea-->
<!--          placeholder="Beschreibung"-->
<!--          autoResize="autoResize"-->
<!--          style='width:100%'-->
<!--      ></textarea>-->
<!--    </div>-->
<!--  </div>-->

  <!--Zusatzausr端stung, Besondere Vorausssetzungen-->
  <div class="p-grid">
    <div class="p-col-12 p-sm-6 p-md-6 p-lg-6">
      <avk-multiselect
          formControlName="equipmentIds"
          choice="equipment"
          label="Ausr端stung"
          [readOnly]="!(userValState >= 0)"
      ></avk-multiselect>
    </div>
    <div class="p-col-12 p-sm-6 p-md-6 p-lg-6">
      <avk-multiselect
          formControlName="qualificationIds"
          choice="requirement"
          label="Vorraussetzungen"
          [readOnly]="!(userValState >= 0)"
      ></avk-multiselect>
    </div>
  </div>

  <!--Teilnehmeranzahl, Strecke, Materialservice-->
  <div class="p-grid">
    <div class="p-col-12 p-sm-3 p-md-3 p-lg-3">
      <avk-membernumber
          formControlName="minQuantity"
          label="MinMember"
          id="m1"
          [maxMember]="maxQuantity.value"
          [readOnly]="!(userValState >= 0)"
      ></avk-membernumber>
    </div>
    <div class="p-col-12 p-sm-3 p-md-3 p-lg-3">
      <avk-membernumber
          formControlName="maxQuantity"
          label="MaxMember"
          id="m2"
          [minMember]="minQuantity.value"
          [readOnly]="!(userValState >= 1)"
      ></avk-membernumber>
    </div>
    <div class="p-col-12 p-sm-3 p-md-3 p-lg-3" *ngIf="false">
      <input formControlName="distance" id="distance" placeholder="PKW Strecke" type="text" style='width:100%'
             pInputText>
    </div>
    <div class="p-col-12 p-sm-3 p-md-3 p-lg-3">
      <p-checkbox
          [formControl]="instructionForm.controls['equipmentService']"
          label="Materialservice"
          binary="true"
      ></p-checkbox>
    </div>
  </div>


  <!--Liste mit Parametern (Tabelle)-->
  <div id="demo2">
    <div class="p-grid">
      <div class="p-col-12 p-sm-12 p-md-12 p-lg-12">
        <p-table [value]="tours" selectionMode="single" (onRowSelect)="onRowSelect($event)">
          <ng-template pTemplate="header">
            <tr>
              <th>Type</th>
              <th>SDate</th>
              <th>STime</th>
              <th>EDate</th>
              <th>ETime</th>
              <th>ShortTitle</th>
              <th>LongTitle</th>
              <th>Location</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-tour>
            <tr [pSelectableRow]="tour">
              <td>{{tour.type}}</td>
              <td>{{tour.sdate}}</td>
              <td>{{tour.stime}}</td>
              <td>{{tour.edate}}</td>
              <td>{{tour.etime}}</td>
              <td>{{tour.title}}</td>
              <td>{{tour.name}}</td>
              <td>{{tour.location}}</td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
  </div>


  <!--Teilnehmergeb端hr-->
  <div class="p-grid">
    <div class="p-col-12 p-sm-3 p-md-3 p-lg-3">
      <input formControlName="admission" id="admission" placeholder="Teilnehmergeb端hr" type="text" style='width:100%'
             pInputText>
    </div>
  </div>

  <!--Bemerkung-->
  <div class="p-grid">
    <div class="p-col-12 p-sm-12 p-md-12 p-lg-12">
      <textarea
          [rows]="3"
          pInputTextarea
          placeholder="Bemerkungen"
          autoResize="autoResize"
          style='width:100%'
      ></textarea>
    </div>
  </div>

  <p-dialog header="EventDetail" [(visible)]="display">
  <form [formGroup]="eventForm">

    <!--Kurztitel, Langtitel-->
    <div class="p-grid">
      <div class="p-col-12 p-sm-4 p-md-4 p-lg-4">
        <input formControlName="title" id="title" placeholder="Kurztitel" type="text" style='width:100%'
               pInputText>
      </div>
      <div class="p-col-12 p-sm-8 p-md-8 p-lg-8">
        <input formControlName="name" id="name" placeholder="Langtitel" type="text" style='width:100%'
               pInputText>
      </div>
    </div>

    <div class="p-grid">
      <div class="p-col-12 p-sm-3 p-md-3 p-lg-3">
        <avk-approxdropdown formControlName="approximateId" id="approx" [readOnly]="!(userValState >= 0)"
                            [disable]="!!startTime.value"></avk-approxdropdown>
      </div>
      <div class="p-col-12 p-sm-3 p-md-3 p-lg-3">
        <avk-time formControlName="startTime" id="time" [disable]="!!approximateId.value"></avk-time>
      </div>
    </div>

    <!--Zusatz: Datumseingabe (Anfang + Ende + Art)-->
    <div class="p-grid">
      <div class="p-col-12 p-sm-3 p-md-3 p-lg-3">
        <avk-date formControlName="startDate"
                  id="dbeginn" label="Start"
                  [max]="endDate.value"
                  [maxInclude]="true"
        ></avk-date>
      </div>
      <div class="p-col-12 p-sm-3 p-md-3 p-lg-3">
        <avk-date formControlName="endDate"
                  id="dend" label="Ende"
                  [min]="startDate.value"
                  [minInclude]="true"
        ></avk-date>
      </div>
      <div class="p-col-12 p-sm-3 p-md-2 p-lg-2">
        <input formControlName="description" id="description" placeholder="Art (z.B Besprechung)" type="text"
               style="width:100%"
               pInputText>
      </div>
      <div class="p-col-12 p-sm-3 p-md-2 p-lg-2">
        <input formControlName="location" id="location" placeholder="Ort (z.B Swoboda Alpin, Gipfel)"
               type="text" style="width:100%"
               pInputText>
      </div>
    </div>
  </form>
  </p-dialog>

</form>
</ng-container>
<ng-template #loading>Bitte kurz warten!</ng-template>
