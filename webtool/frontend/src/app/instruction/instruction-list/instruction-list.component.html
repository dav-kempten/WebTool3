<ng-container *ngIf="(activeItem$ | async) as activeItem">
  <p-tabMenu [model]="menuItems" [activeItem]="{}"></p-tabMenu>
  <p-button label="Kurs hinzufügen" (onClick)="handleClick()"></p-button>
  <ng-container *ngIf="(instructions$ | async) as instructions">
    <p-table [value]="instructions" selectionMode="single" (selectionChange)="selectInstruction($event)">
      <ng-template pTemplate="header">
        <tr>
          <th>Buchungscode</th>
          <th>Datum</th>
          <th>Bezeichnung</th>
          <th>Trainer</th>
          <th>Belegung (Min|Aktuell|Max)</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-instruction>
        <tr [pSelectableRow]="instruction">
          <td>{{instruction.reference}}</td>
          <td>{{instruction.startDate | date}}</td>
          <td>{{instruction.title}}</td>
          <td>{{instruction.guideId | name}}</td>
          <td>{{instruction.minQuantity}} | {{instruction.curQuantity}} | {{instruction.maxQuantity}}</td>
        </tr>
      </ng-template>
    </p-table>
  </ng-container>
  <form [formGroup]="instructionGroup">

  <!--  Beginn Dialogfenster  -->
  <p-dialog header="Neuer Kurs" [modal]="true" [(visible)]="display"
            [contentStyle]="{'max-width': '800px', 'max-height': '800px'}">
    <div class="p-grid">
      <div class="p-col-12 p-sm-6 p-md-6 p-lg-6">
        <input formControlName="id" id="id" placeholder="ID" type="number" style='width:100%'
               pInputText>
      </div>
      <div class="p-col-12 p-sm-6 p-md-6 p-lg-6">
      </div>
    </div>
    <div class="p-grid">
      <div class="p-col-12 p-sm-6 p-md-6 p-lg-6">
        <input formControlName="reference" id="reference" placeholder="Buchungsnummer" type="text" style='width:100%'
               pInputText>
      </div>
      <div class="p-col-12 p-sm-6 p-md-6 p-lg-6">
        <avk-categoryselect
            formControlName="topicId"
            id="topicId">
        </avk-categoryselect>
      </div>
    </div>
    <div class="p-grid">
      <div class="p-col-12 p-sm-6 p-md-6 p-lg-6">
        <avk-membernumber
          formControlName="minQuantity"
          label="Mindestens"
          id="m1"
          [maxMember]="instructionGroup.get('maxQuantity').value"
        ></avk-membernumber>
      </div>
      <div class="p-col-12 p-sm-6 p-md-6 p-lg-6">
        <avk-membernumber
          formControlName="maxQuantity"
          label="Maximal"
          id="m2"
          [minMember]="instructionGroup.get('minQuantity').value"
        ></avk-membernumber>
      </div>
    </div>
    <form [formGroup]="eventGroup"><div class="p-grid">
      <div class="p-col-12 p-sm-6 p-md-6 p-lg-6">
        <input formControlName="id" id="eventId" placeholder="EventId" type="number" style='width:100%'
               pInputText>
      </div>
      <div class="p-col-12 p-sm-6 p-md-6 p-lg-6">
      </div>
    </div>
    <div class="p-grid">
      <div class="p-col-12 p-sm-6 p-md-6 p-lg-6">
        <avk-date formControlName="startDate"
                  id="dbeginn" label="Start"
                  [maxInclude]="true"
                  [max]="eventGroup.get('endDate').value"
        ></avk-date>
      </div>
      <div class="p-col-12 p-sm-6 p-md-6 p-lg-6">
        <avk-date formControlName="endDate"
                  id="dend" label="Ende"
                  [minInclude]="true"
                  [min]="eventGroup.get('startDate').value"
        ></avk-date>
      </div>
    </div>
    </form>
    <p-button label="Bestätigen" (onClick)="confirmClick()"></p-button>
  </p-dialog>
  </form>
</ng-container>
